<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.snscard.web.mapper.InformationMapper">
    <insert id="insertUserPath" parameterType="String">
        insert into path(name,image_all_name,cardNum) values (#{name},#{image_all_name},#{cardNum});
    </insert>
    <insert id="insertUserInfo" parameterType="com.snscard.web.pojo.UserInfo">
        insert into user_info(name,cardNum,info,templateNum) values (#{name},#{cardNum},#{info},#{templateNum})
    </insert>
    <select id="queryUserInfo"  resultType="com.snscard.web.utils.ResultInfoAndImage">
        select p.name, p.cardNum, u.info, p.image_all_name,u.templateNum,i.x1,i.x3,i.y1,i.y3 from user_info u join path p join image_coordinate i  where p.name=#{name}=u.name=i.name and p.cardNum=#{cardNum}=u.cardNum=i.cardNum
    </select>
    <insert id="insertUserCropPath" parameterType="String">
        insert into crop_path(name,image_all_name,cardNum) values (#{name},#{image_all_name},#{cardNum});
    </insert>
    <parameterMap id="image" type="com.snscard.web.pojo.UserImage">
        <parameter property="name" javaType="String"/>
        <parameter property="pageNum" javaType="int"/>
    </parameterMap>
    <select id="queryAllUserImage" parameterMap="image" resultType="String">
        select image_all_name from path  where name=#{name} LIMIT #{pageNum}, 10;
    </select>
    <select id="queryAllUserCropperImage" parameterMap="image" resultType="String">
        select image_all_name from crop_path where name=#{name} LIMIT #{pageNum}, 10;
    </select>
    <insert id="insertGitHubUrl" parameterType="com.snscard.web.pojo.UserGitHubUrl">
        insert into github_url(name,github,cardNum) values (#{name},#{github},cardNum)
    </insert>
    <insert id="insertNaverUrl" parameterType="com.snscard.web.pojo.UserGitHubUrl">
        insert into naver_url(name,naver,cardNum) values (#{name},#{naver},cardNum)
    </insert>
    <insert id="insertTistoryUrl" parameterType="com.snscard.web.pojo.UserGitHubUrl">
        insert into tistory_url(name,tistory,cardNum) values (#{name},#{tistory},cardNum)
    </insert>
    <insert id="insertGithubInfo" parameterType="com.snscard.web.pojo.UserTitleDate">
       insert into github_info(name,title,date,cardNum) values (#{name},#{title},#{date},#{cardNum})
    </insert>
    <insert id="insertNaverInfo" parameterType="com.snscard.web.pojo.UserTitleDate">
        insert into naver_info(name,title,date,cardNum) values (#{name},#{title},#{date},#{cardNum})
    </insert>
    <insert id="insertTistoryInfo" parameterType="com.snscard.web.pojo.UserTitleDate">
        insert into tistory_info(name,title,date,cardNum) values (#{name},#{title},#{date},#{cardNum})
    </insert>
    <update id="updateGithubInfo" parameterType="com.snscard.web.pojo.UserTitleDate">
        update github_info set title=#{title},date=#{date} where name=#{name} and cardNum=#{cardNum}
    </update>
    <update id="updateNaverInfo" parameterType="com.snscard.web.pojo.UserTitleDate">
        update github_info set title=#{title},date=#{date} where name=#{name} and cardNum=#{cardNum}
    </update>
    <update id="updateTistoryInfo" parameterType="com.snscard.web.pojo.UserTitleDate">
        update github_info set title=#{title},date=#{date} where name=#{name} and cardNum=#{cardNum}
    </update>
    <select id="querygithubInfo" parameterType="com.snscard.web.pojo.NameCardNum" resultType="com.snscard.web.utils.GetTitleDate">
        select title,date from github_info where name=#{name} and cardNum=#{cardNum};
    </select>
    <select id="querynaverInfo" parameterType="com.snscard.web.pojo.NameCardNum" resultType="com.snscard.web.utils.GetTitleDate">
        select title,date from naver_info where name=#{name} and cardNum=#{cardNum};
    </select>
    <select id="querytistoryInfo" parameterType="com.snscard.web.pojo.NameCardNum" resultType="com.snscard.web.utils.GetTitleDate">
        select title,date from tistory_info where name=#{name} and cardNum=#{cardNum};
    </select>
    <select id="queryGithubUrl" parameterType="com.snscard.web.pojo.NameCardNum">
        select github from github_url where name=#{name} and cardNum=#{cardNum}
    </select>
    <select id="queryNaverubUrl" parameterType="com.snscard.web.pojo.NameCardNum">
        select naver from naver_url where name=#{name} and cardNum=#{cardNum}
    </select>
    <select id="queryTistoryUrl" parameterType="com.snscard.web.pojo.NameCardNum">
        select tistory from tistory_url where name=#{name} and cardNum=#{cardNum}
    </select>
    <update id="updateGithubUrl" parameterType="com.snscard.web.pojo.UserGitHubUrl">
        update github_url set github=#{github} where name=#{name} and cardNum=#{cardNum};
    </update>
    <update id="updateNaverUrl" parameterType="com.snscard.web.pojo.UserGitHubUrl">
        update naver_url set naver=#{github} where name=#{name} and cardNum=#{cardNum};
    </update>
    <update id="updateTistoryUrl" parameterType="com.snscard.web.pojo.UserGitHubUrl">
        update tistory_url set tistory=#{github} where name=#{name} and cardNum=#{cardNum};
    </update>
    <select id="querySampleUrl" parameterType="int" resultType="String">
        select image_all_name from sample_path where number=#{number}
    </select>

</mapper>